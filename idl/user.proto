syntax = "proto3";

package user;
import "api.proto";

message UserRegisterReq{
    string nickname = 1;
	  string username = 2;
	  string password = 3;
    string captchaID = 4;
    string captcha = 5;
    string email = 6;
}

enum ErrCode {
  Success = 0;
  ArgumentError = 1;
  CaptchaError = 2;
  CreateUserError = 3;
  CaptchaMismatchError = 4;
}

message BaseResp {
  ErrCode errCode = 1;
  string errMsg = 2;
}

message Empty {}

message CaptchaInfoResp {
  ErrCode errCode = 1;
  string errMsg = 2;
  string captchaID = 3;
  string imgPath = 4;
}

service user{
  rpc Register(UserRegisterReq) returns (BaseResp) {
    option (api.post) = "/api/register";
  }
  rpc Captcha(Empty) returns (CaptchaInfoResp){
    option (api.get) = "/api/captcha";
  }
}
